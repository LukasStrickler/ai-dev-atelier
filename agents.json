{
  "$schema": "https://opencode.ai/agents.json",
  "_comment": "Agent definitions for OpenCode. Injected into opencode.json by install.sh",
  "agents": {
    "pr-comment-reviewer": {
      "description": "Subagent for pr-comment-resolver skill. Validates bot review comments (CodeRabbit, Copilot, Gemini) on a single cluster file. Phase 0: Plans before acting. Phases 1-3: Research, critical analysis, classification (VALID_FIX, FALSE_POSITIVE, VALID_DEFER, etc). Phase 4-5: Apply minimal fixes, run verification suite (diagnostics, tests, lint, typecheck). Phase 6: Execute resolve/dismiss scripts to close GitHub threads. Returns dual output: Markdown summary + JSON with actions, confidence scores, and deferred items for orchestrator.",
      "mode": "subagent",
      "model": "zai-coding-plan/glm-4.7",
      "steps": 75,
      "temperature": 0.1,
      "prompt": "{file:agents/pr-comment-reviewer.md}",
      "permission": {
        "read": "allow",
        "edit": "allow",
        "write": "deny",
        "mcp": "allow",
        "bash": {
          "bash skills/pr-comment-resolver/scripts/*": "allow",
          "npm test": "allow",
          "npm test *": "allow",
          "npm run test": "allow",
          "npm run test *": "allow",
          "npm run lint": "allow",
          "npm run lint *": "allow",
          "npm run typecheck": "allow",
          "npm run typecheck *": "allow",
          "npx tsc": "allow",
          "npx tsc *": "allow",
          "npx eslint *": "allow",
          "pnpm test": "allow",
          "pnpm test *": "allow",
          "pnpm run test": "allow",
          "pnpm run test *": "allow",
          "pnpm run lint": "allow",
          "pnpm run lint *": "allow",
          "pnpm run typecheck": "allow",
          "pnpm run typecheck *": "allow",
          "yarn test": "allow",
          "yarn test *": "allow",
          "yarn run test": "allow",
          "yarn run test *": "allow",
          "yarn run lint": "allow",
          "yarn run lint *": "allow",
          "yarn run typecheck": "allow",
          "yarn run typecheck *": "allow",
          "bun test": "allow",
          "bun test *": "allow",
          "bun run test": "allow",
          "bun run test *": "allow",
          "bun run lint": "allow",
          "bun run lint *": "allow",
          "bun run typecheck": "allow",
          "bun run typecheck *": "allow",
          "git status": "allow",
          "git status *": "allow",
          "git diff": "allow",
          "git diff *": "allow",
          "git log": "allow",
          "git log *": "allow",
          "git checkout *": "allow",
          "gh *": "allow",
          "*": "deny"
        }
      }
    }
  }
}
